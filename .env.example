# ==============================================
# S1NGULARITY ENVIRONMENT CONFIGURATION
# ==============================================
# Copy this file to .env and fill in your actual values
# NEVER commit .env to version control

# ----------------------------------------------
# APPLICATION SETTINGS
# ----------------------------------------------
APP_ENV=development
APP_NAME=s1ngularity
API_VERSION=v1
DEBUG=True
LOG_LEVEL=INFO

# Server Configuration
HOST=0.0.0.0
PORT=8000
WORKERS=4

# ----------------------------------------------
# JOBDIVA ATS INTEGRATION (REQUIRED)
# ----------------------------------------------
JOBDIVA_BASE_URL=https://api.jobdiva.com/api/v2
JOBDIVA_CLIENT_ID=your_client_id_here
JOBDIVA_USERNAME=your_username_here
JOBDIVA_PASSWORD=your_password_here

# ----------------------------------------------
# LLM PROVIDERS (CHOOSE ONE OR BOTH)
# ----------------------------------------------
# OpenAI Configuration
OPENAI_API_KEY=sk-...
OPENAI_MODEL=gpt-4o
OPENAI_MAX_TOKENS=4096
OPENAI_TEMPERATURE=0.7

# Anthropic Configuration
ANTHROPIC_API_KEY=sk-ant-...
ANTHROPIC_MODEL=claude-3-5-sonnet-20250101
ANTHROPIC_MAX_TOKENS=4096
ANTHROPIC_TEMPERATURE=0.7

# Default LLM Provider (openai or anthropic)
LLM_PROVIDER=anthropic

# ----------------------------------------------
# WEB SEARCH API (REQUIRED - Prevents Hallucinations)
# ----------------------------------------------
# Tavily Search API (Recommended)
TAVILY_API_KEY=tvly-...

# Alternative: SerpAPI (Optional)
# SERPAPI_API_KEY=your_serpapi_key_here

# Search Configuration
WEB_SEARCH_PROVIDER=tavily
WEB_SEARCH_MAX_RESULTS=5
WEB_SEARCH_CACHE_TTL=3600

# ----------------------------------------------
# PDF PARSING SERVICES (OPTIONAL)
# ----------------------------------------------
# LlamaParse (Recommended for resume parsing)
LLAMA_PARSE_API_KEY=llx-...

# Unstructured.io API
# UNSTRUCTURED_API_KEY=your_unstructured_api_key

# Default PDF Parser (llama_parse, pymupdf, or pdfplumber)
PDF_PARSER=llama_parse

# ----------------------------------------------
# DATABASE CONFIGURATION
# ----------------------------------------------
# PostgreSQL (Production)
DATABASE_URL=postgresql+asyncpg://user:password@localhost:5432/s1ngularity

# SQLite (Development fallback)
# DATABASE_URL=sqlite+aiosqlite:///./s1ngularity.db

# Database Pool Settings
DB_POOL_SIZE=10
DB_MAX_OVERFLOW=20
DB_POOL_TIMEOUT=30

# ----------------------------------------------
# REDIS CACHE & SESSION STORAGE
# ----------------------------------------------
# Redis URL for token caching and session management
REDIS_URL=redis://localhost:6379/0

# Alternative: Upstash Redis (Serverless)
# REDIS_URL=rediss://default:password@redis.upstash.io:6379

# Redis Configuration
REDIS_TTL=3600
REDIS_MAX_CONNECTIONS=10

# ----------------------------------------------
# SECURITY & AUTHENTICATION
# ----------------------------------------------
# JWT Secret (Generate with: openssl rand -hex 32)
JWT_SECRET_KEY=your_jwt_secret_key_here_change_this_in_production
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=60
JWT_REFRESH_TOKEN_EXPIRE_DAYS=7

# CORS Settings (comma-separated origins)
CORS_ORIGINS=http://localhost:3000,http://localhost:8000
CORS_ALLOW_CREDENTIALS=True

# Rate Limiting
RATE_LIMIT_PER_MINUTE=60
RATE_LIMIT_PER_HOUR=1000

# ----------------------------------------------
# MONITORING & LOGGING
# ----------------------------------------------
# Sentry Error Tracking (Optional)
SENTRY_DSN=https://...@sentry.io/...
SENTRY_ENVIRONMENT=development
SENTRY_TRACES_SAMPLE_RATE=0.1

# Log Configuration
LOG_FORMAT=json
LOG_FILE=logs/s1ngularity.log
LOG_ROTATION=100 MB
LOG_RETENTION=30 days

# ----------------------------------------------
# TASK QUEUE & BACKGROUND JOBS (OPTIONAL)
# ----------------------------------------------
# Celery Configuration
CELERY_BROKER_URL=redis://localhost:6379/1
CELERY_RESULT_BACKEND=redis://localhost:6379/2
CELERY_TASK_ALWAYS_EAGER=False

# ----------------------------------------------
# ADVANCED SETTINGS
# ----------------------------------------------
# Module Loading Strategy
INTELLIGENT_MODULE_LOADING=True
MODULE_CACHE_ENABLED=True
MODULE_CACHE_TTL=1800

# Context Management
MAX_CONTEXT_TOKENS=128000
CONTEXT_COMPRESSION_ENABLED=True

# Analytics & Feedback
FEEDBACK_LOGGING_ENABLED=True
ANALYTICS_TRACKING_ENABLED=True

# Feature Flags
ENABLE_BIAS_DETECTION=True
ENABLE_PREDICTIVE_ANALYTICS=True
ENABLE_WEB_SEARCH_VALIDATION=True
ENABLE_RESUME_PARSING=True

# ----------------------------------------------
# DEVELOPMENT SETTINGS
# ----------------------------------------------
# Auto-reload on code changes
RELOAD=True

# Enable API documentation
ENABLE_DOCS=True
DOCS_URL=/docs
REDOC_URL=/redoc

# Testing
TEST_MODE=False
MOCK_EXTERNAL_APIS=False
